(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Jit6:function(t,e,n){"use strict";n.r(e),n.d(e,"RequestModule",(function(){return A}));var o=n("ofXK"),i=n("3Pt+"),r=n("1kSV"),a=n("tyNb"),c=n("fXoL"),s=n("8vjg"),b=n("J8x5"),d=n("g54X"),l=n("o+T9");function h(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"td",20),c.zc(2),c.Ob(),c.Pb(3,"td",21),c.zc(4),c.dc(5,"dFormat"),c.Ob(),c.Pb(6,"td",21),c.zc(7),c.Ob(),c.Pb(8,"td"),c.zc(9),c.Ob(),c.Pb(10,"td",21),c.zc(11),c.dc(12,"dFormat"),c.Ob(),c.Pb(13,"td",21),c.zc(14),c.Ob(),c.Pb(15,"td",21),c.Pb(16,"span",14),c.ac("click",(function(){c.rc(t);const n=e.$implicit;return c.cc().itemDetail(n)})),c.Lb(17,"i",22),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=e.$implicit,n=e.index,o=c.cc();c.xb(2),c.Ac(n+1),c.xb(2),c.Ac(c.ec(5,6,t.docdate)),c.xb(3),c.Ac(t.refno),c.xb(2),c.Ac(o.rds.getMemberName(t.membersyskey)),c.xb(2),c.Ac(c.ec(12,8,t.returndate)),c.xb(3),c.Ac(o.statusName(t.status))}}const g=function(){return{standalone:!0}};let u=(()=>{class t{constructor(t,e,n,o){this._router=t,this.http=e,this.dataService=n,this.rds=o,this.bookRequestList=[],this.searchString="",this.totalCount=0,this.currentPage=1,this.pageSize=10}ngOnInit(){this.searchTerm("")}searchTerm(t){console.log("log",t),this.http.doPost(this.dataService._apiurl+"/rent/getrentlist",{code:t,currentpage:this.currentPage,pagesize:this.pageSize}).subscribe(t=>{console.log("--------------------: ",t),this.bookRequestList=t.list,this.totalCount=t.totalcount})}statusName(t){let e="";return null!=t&&("0"==t?e="Save":"1"==t?e="Rent":"2"==t?e="Void":"3"==t&&(e="Return")),e}loadPage(t){this.currentPage=t,this.searchTerm(this.searchString)}goDetail(){this._router.navigate(["/bookrequest"])}itemDetail(t){this._router.navigate(["/bookrequest/bookrequest-detail",t.systemkey])}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(a.b),c.Kb(s.a),c.Kb(b.a),c.Kb(d.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-book-request-list"]],decls:40,vars:10,consts:[[1,"bg-style"],[1,"row",2,"margin","0px"],[1,"col","col-xl-6","col-lg-12"],[1,"row"],[1,"col","col-md-12","col-lg-12"],[1,"card","mb-3",2,"min-height","30rem"],[1,"card-header"],[1,"col-md-6"],[1,"form-group","input-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-search"],[1,"table","table-sm","table-hover","table-striped"],[3,"click"],["aria-hidden","true",1,"fa","fa-plus-circle",2,"font-size","18px"],[4,"ngFor","ngForOf"],[1,"rows"],[1,"col","col-xl-12","col-lg-12"],["size","sm",1,"d-flex","justify-content-end",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],["scope","row"],[2,"text-align","center"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-right"]],template:function(t,e){1&t&&(c.Pb(0,"div",0),c.Pb(1,"div",1),c.Pb(2,"div",2),c.Pb(3,"h2"),c.zc(4,"Book Request"),c.Ob(),c.Ob(),c.Ob(),c.Pb(5,"div",3),c.Pb(6,"div",4),c.Pb(7,"div",5),c.Pb(8,"div",6),c.Pb(9,"div",3),c.Pb(10,"div",7),c.Pb(11,"div",8),c.Pb(12,"input",9),c.ac("ngModelChange",(function(t){return e.searchString=t}))("keyup.enter",(function(){return e.searchTerm(e.searchString)})),c.Ob(),c.Pb(13,"div",10),c.Pb(14,"button",11),c.ac("click",(function(){return e.searchTerm(e.searchString)})),c.Lb(15,"i",12),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Lb(16,"div",7),c.Ob(),c.Ob(),c.Pb(17,"table",13),c.Pb(18,"thead"),c.Pb(19,"tr"),c.Pb(20,"th"),c.Pb(21,"span",14),c.ac("click",(function(){return e.goDetail()})),c.Lb(22,"i",15),c.Ob(),c.Ob(),c.Pb(23,"th"),c.zc(24,"Date"),c.Ob(),c.Pb(25,"th"),c.zc(26,"Ref no."),c.Ob(),c.Pb(27,"th"),c.zc(28,"Member"),c.Ob(),c.Pb(29,"th"),c.zc(30,"Return Date"),c.Ob(),c.Pb(31,"th"),c.zc(32,"Status"),c.Ob(),c.Pb(33,"th"),c.zc(34,"\xa0"),c.Ob(),c.Ob(),c.Ob(),c.Pb(35,"tbody"),c.xc(36,h,18,10,"tr",16),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(37,"div",17),c.Pb(38,"div",18),c.Pb(39,"ngb-pagination",19),c.ac("pageChange",(function(t){return e.loadPage(t)}))("pageChange",(function(t){return e.currentPage=t})),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.xb(12),c.ic("ngModel",e.searchString)("ngModelOptions",c.lc(9,g)),c.xb(24),c.ic("ngForOf",e.bookRequestList),c.xb(3),c.ic("collectionSize",e.totalCount)("page",e.currentPage)("pageSize",e.pageSize)("maxSize",10)("rotate",!0)("boundaryLinks",!0))},directives:[i.a,i.e,i.h,o.l,r.k],pipes:[l.a],styles:[".bg-style[_ngcontent-%COMP%]{background-color:#fff}.card-header[_ngcontent-%COMP%]{padding:10px 0 0;margin-bottom:0}.card[_ngcontent-%COMP%]{padding:5px 10px 0}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;background-color:#3d0af5;color:#fff;border:2px solid #dee2e6;border-left:none;white-space:nowrap;padding:5px;font-size:14px!important;text-align:center}"]}),t})();var m=n("mNYA"),p=n("E4M5");const P=["searchcode"],O=function(){return{standalone:!0}};function f(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"td",46),c.zc(2),c.Ob(),c.Pb(3,"td",47),c.zc(4),c.Ob(),c.Pb(5,"td",48),c.zc(6),c.Ob(),c.Pb(7,"td",49),c.Pb(8,"div",50),c.Pb(9,"input",51),c.ac("ngModelChange",(function(n){return c.rc(t),e.$implicit.quantity=n})),c.Ob(),c.Ob(),c.Ob(),c.Pb(10,"td",52),c.zc(11),c.Ob(),c.Pb(12,"td",53),c.Pb(13,"span",54),c.ac("click",(function(){c.rc(t);const n=e.index;return c.cc().removeItem(n)})),c.Lb(14,"i",55),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=e.$implicit,n=e.index,o=c.cc();c.xb(2),c.Ac(n+1),c.xb(2),c.Ac(t.bookcode),c.xb(2),c.Ac(t.bookname),c.xb(3),c.ic("ngModel",t.quantity)("ngModelOptions",c.lc(7,O))("disabled",!o.handleBtn.qty),c.xb(2),c.Ac(o.rds.getAuthorName(t.authorsystemkey))}}function y(t,e){1&t&&(c.Pb(0,"h4",62),c.zc(1,"Book List"),c.Ob())}function M(t,e){1&t&&(c.Pb(0,"h4",62),c.zc(1,"Member List"),c.Ob())}function k(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"td",79),c.Pb(2,"span",80),c.ac("click",(function(){c.rc(t);const n=e.$implicit;return c.cc(3).addItem(n)})),c.zc(3),c.Ob(),c.Ob(),c.Pb(4,"td",76),c.zc(5),c.Ob(),c.Pb(6,"td",42),c.zc(7),c.Ob(),c.Pb(8,"td",42),c.zc(9),c.Ob(),c.Pb(10,"td",81),c.Pb(11,"button",82),c.ac("click",(function(){c.rc(t);const n=e.$implicit;return c.cc(3).addItem(n)})),c.zc(12,"Add"),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=e.$implicit,n=c.cc(3);c.xb(3),c.Ac(t.code),c.xb(2),c.Ac(t.name),c.xb(2),c.Ac(n.rds.getAuthorName(t.author)),c.xb(2),c.Ac(n.rds.getCategoryName(t.booktype))}}function v(t,e){if(1&t){const t=c.Qb();c.Pb(0,"div",63),c.Pb(1,"div",3),c.Pb(2,"div",64),c.Pb(3,"div",65),c.Pb(4,"div",31),c.Pb(5,"div",3),c.Pb(6,"div",66),c.Pb(7,"div",32),c.Pb(8,"input",67),c.ac("ngModelChange",(function(e){return c.rc(t),c.cc(2).searchString=e}))("ngModelChange",(function(){c.rc(t);const e=c.cc(2);return e.searchChangeBook(e.searchString)}))("keyup.enter",(function(){c.rc(t);const e=c.cc(2);return e.modalBookSearchTerm(e.searchString)})),c.Ob(),c.Pb(9,"div",12),c.Pb(10,"button",68),c.ac("click",(function(){c.rc(t);const e=c.cc(2);return e.modalBookSearchTerm(e.searchString)})),c.Lb(11,"i",14),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(12,"div",66),c.Pb(13,"div",69),c.Pb(14,"input",70),c.ac("ngModelChange",(function(e){return c.rc(t),c.cc(2)._optionRadio=e}))("ngModelChange",(function(e){return c.rc(t),c.cc(2).changeOption(e)})),c.Ob(),c.Pb(15,"label",71),c.zc(16,"Default"),c.Ob(),c.Ob(),c.Pb(17,"div",69),c.Pb(18,"input",72),c.ac("ngModelChange",(function(e){return c.rc(t),c.cc(2)._optionRadio=e}))("ngModelChange",(function(e){return c.rc(t),c.cc(2).changeOption(e)})),c.Ob(),c.Pb(19,"label",73),c.zc(20,"Author"),c.Ob(),c.Ob(),c.Pb(21,"div",69),c.Pb(22,"input",74),c.ac("ngModelChange",(function(e){return c.rc(t),c.cc(2)._optionRadio=e}))("ngModelChange",(function(e){return c.rc(t),c.cc(2).changeOption(e)})),c.Ob(),c.Pb(23,"label",75),c.zc(24,"Type"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(25,"table",37),c.Pb(26,"thead"),c.Pb(27,"tr"),c.Pb(28,"th",41),c.zc(29,"Code"),c.Ob(),c.Pb(30,"th",76),c.zc(31,"Name"),c.Ob(),c.Pb(32,"th",42),c.zc(33,"Author"),c.Ob(),c.Pb(34,"th",42),c.zc(35,"Type"),c.Ob(),c.Pb(36,"th",41),c.zc(37,"\xa0"),c.Ob(),c.Ob(),c.Ob(),c.Pb(38,"tbody"),c.xc(39,k,13,4,"tr",44),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(40,"div",77),c.Pb(41,"div",29),c.Pb(42,"ngb-pagination",78),c.ac("pageChange",(function(e){return c.rc(t),c.cc(2).loadPage(e)}))("pageChange",(function(e){return c.rc(t),c.cc(2).currentPage=e})),c.Ob(),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=c.cc(2);c.xb(8),c.ic("ngModel",t.searchString)("ngModelOptions",c.lc(12,O)),c.xb(6),c.ic("ngModel",t._optionRadio),c.xb(4),c.ic("ngModel",t._optionRadio),c.xb(4),c.ic("ngModel",t._optionRadio),c.xb(17),c.ic("ngForOf",t.bookList),c.xb(3),c.ic("collectionSize",t.totalCount)("page",t.currentPage)("pageSize",t.pageSize)("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function x(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"td",85),c.zc(2),c.dc(3,"dFormat"),c.Ob(),c.Pb(4,"td",86),c.Pb(5,"span",80),c.ac("click",(function(){c.rc(t);const n=e.$implicit;return c.cc(3).addItem(n)})),c.zc(6),c.Ob(),c.Ob(),c.Pb(7,"td"),c.zc(8),c.Ob(),c.Pb(9,"td",85),c.Pb(10,"button",82),c.ac("click",(function(){c.rc(t);const n=e.$implicit;return c.cc(3).addItem(n)})),c.zc(11,"Add"),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=e.$implicit;c.xb(2),c.Ac(c.ec(3,3,t.starteddate)),c.xb(4),c.Ac(t.code),c.xb(2),c.Ac(t.name)}}function C(t,e){if(1&t){const t=c.Qb();c.Pb(0,"div",63),c.Pb(1,"div",3),c.Pb(2,"div",64),c.Pb(3,"div",65),c.Pb(4,"div",31),c.Pb(5,"div",3),c.Pb(6,"div",66),c.Pb(7,"div",32),c.Pb(8,"input",67),c.ac("ngModelChange",(function(e){return c.rc(t),c.cc(2).searchString=e}))("ngModelChange",(function(){c.rc(t);const e=c.cc(2);return e.searchChangeMember(e.searchString)}))("keyup.enter",(function(){c.rc(t);const e=c.cc(2);return e.searchMember(e.searchString)})),c.Ob(),c.Pb(9,"div",12),c.Pb(10,"button",68),c.ac("click",(function(){c.rc(t);const e=c.cc(2);return e.searchMember(e.searchString)})),c.Lb(11,"i",14),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Lb(12,"div",66),c.Ob(),c.Ob(),c.Pb(13,"table",37),c.Pb(14,"thead"),c.Pb(15,"tr"),c.Pb(16,"th",83),c.zc(17,"Date"),c.Ob(),c.Pb(18,"th",52),c.zc(19,"Code"),c.Ob(),c.Pb(20,"th",84),c.zc(21,"Name"),c.Ob(),c.Pb(22,"th",83),c.zc(23,"\xa0"),c.Ob(),c.Ob(),c.Ob(),c.Pb(24,"tbody"),c.xc(25,x,12,5,"tr",44),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(26,"div",77),c.Pb(27,"div",29),c.Pb(28,"ngb-pagination",78),c.ac("pageChange",(function(e){return c.rc(t),c.cc(2).loadPage(e)}))("pageChange",(function(e){return c.rc(t),c.cc(2).currentPage=e})),c.Ob(),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=c.cc(2);c.xb(8),c.ic("ngModel",t.searchString)("ngModelOptions",c.lc(9,O)),c.xb(17),c.ic("ngForOf",t.memberList),c.xb(3),c.ic("collectionSize",t.totalCount)("page",t.currentPage)("pageSize",t.pageSize)("maxSize",10)("rotate",!0)("boundaryLinks",!0)}}function _(t,e){if(1&t&&(c.Pb(0,"div",56),c.xc(1,y,2,0,"h4",57),c.xc(2,M,2,0,"h4",57),c.Pb(3,"button",58),c.ac("click",(function(){return(0,e.dismiss)("Cross click")})),c.Pb(4,"span",59),c.zc(5,"\xd7"),c.Ob(),c.Ob(),c.Ob(),c.xc(6,v,43,13,"div",60),c.xc(7,C,29,10,"div",60),c.Lb(8,"div",61)),2&t){const t=c.cc();c.xb(1),c.ic("ngIf",1==t._popType),c.xb(1),c.ic("ngIf",2==t._popType),c.xb(4),c.ic("ngIf",1==t._popType),c.xb(1),c.ic("ngIf",2==t._popType)}}let S=(()=>{class t{constructor(t,e,n,o,i,r,a,c){this.modalService=t,this._router=e,this.route=n,this.http=o,this.dataService=i,this.datepipe=r,this.rds=a,this.msgService=c,this._util=new m.a,this.bookList=[],this.memberList=[],this.itemList=[],this.searchString="",this._searchCode="",this._optionRadio="1",this.totalCount=10,this.currentPage=1,this.pageSize=10,this._popType=1,this.handleBtn={search:!0,save:!0,add:!0,rent:!0,void:!1,qty:!0,delete:!0},this.hdr=this.defaultHdr(),setTimeout(()=>{this.viewMe.nativeElement.focus()},1e3)}ngOnInit(){this.route.params.subscribe(t=>{let e=t.id;"0"!=e&&null!=e&&""!=e?this.getReadBySyskey(e):this.hdr=this.defaultHdr()})}getReadBySyskey(t){let e={systemkey:t,currentpage:1,pagesize:10};this.http.doPost(this.dataService.getApiUrl()+"/rent/readbyRentbookSyskey",e).subscribe(t=>{this.hdr.systemkey=t.systemkey,this.hdr.refno=t.refno,this.hdr.docdate=this._util.changeStringtoDateDDMMYYYY(t.docdate),this.hdr.returndate=this._util.changeStringtoDateDDMMYYYY(t.returndate),this.hdr.membersyskey=t.membersyskey,this.hdr.membername=t.membername,this.hdr.status=t.status,this.hdr.remark=t.remark,this.itemList=t.rentalDetailInfoList,this.handleStatus(this.hdr.status)})}goList(){this._router.navigate(["/bookrequest/bookrequest-list"])}goNew(){this.hdr=this.defaultHdr();let t=new Date;t.setDate(t.getDate()+3),this.hdr.docdate=this.datepipe.transform(new Date,"dd/MM/yyyy"),this.hdr.returndate=this.datepipe.transform(t,"dd/MM/yyyy"),this.itemList=[],this.handleStatus(this.hdr.status)}goSave(){if(null!=this.hdr.membersyskey&&"0"!=this.hdr.membersyskey){if(this.hdr.status==this._util.SAVE_STATUS)if(this.itemList.length>0){let t=this.dataService._apiurl+"/rent/save",e=this.getPrepareParam();this.saveData(t,e)}else this.showMessage("warning","Please add book!")}else this.showMessage("warning","Invalid member!")}goRent(){if(null!=this.hdr.membersyskey&&"0"!=this.hdr.membersyskey){if(this.hdr.status==this._util.SAVE_STATUS)if(this.itemList.length>0){let t=this.dataService._apiurl+"/rent/save",e=this.getPrepareParam();e.status="1",this.saveData(t,e)}else this.showMessage("warning","Please add book!")}else this.showMessage("warning","Invalid member!")}saveData(t,e){this.http.doPost(t,e).subscribe(t=>{"SUCCESS"==t.message?t.list.length>0&&(this.showMessage("success","Save Successfully!"),this.hdr.systemkey=t.list[0].systemkey,this.hdr.refno=t.list[0].refno,this.hdr.membersyskey=t.list[0].membersyskey,this.hdr.status=t.list[0].status,this.hdr.remark=t.list[0].remark,this.hdr.membercode=this.rds.getMemberCode(t.list[0].membersyskey),this.hdr.membername=this.rds.getMemberName(t.list[0].membersyskey),this.hdr.docdate=this._util.changeStringtoDateDDMMYYYY(t.list[0].docdate),this.hdr.returndate=this._util.changeStringtoDateDDMMYYYY(t.list[0].returndate),this.handleStatus(this.hdr.status)):this.showMessage("warning","FAIL"==t.message?"Fail!":t.message+"!")},t=>{console.error(t),this.showMessage("warning","Server Error!")})}getPrepareParam(){let t={systemkey:this.hdr.systemkey,refno:this.hdr.refno,docdate:this._util.changeDatetoStringYYYYMMDDD(this.hdr.docdate),duedate:this._util.changeDatetoStringYYYYMMDDD(this.hdr.returndate),returndate:this._util.changeDatetoStringYYYYMMDDD(this.hdr.returndate),membersyskey:this.hdr.membersyskey,membercode:this.hdr.membercode,status:"0",userid:"0",username:"0",remark:this.hdr.remark,rentalDetailInfoList:[]};for(let e of this.itemList)t.rentalDetailInfoList.push({systemkey:"0",parentsystemkey:"0",bookcode:e.bookcode,bookname:e.bookname,booksystemkey:e.booksystemkey,authorname:e.authorname,authorsystemkey:e.authorsystemkey,quantity:e.quantity});return t}goDelete(){let t={systemkey:this.hdr.systemkey,currentpage:1,pagesize:10};console.log("Param : ",t),"0"!=this.hdr.systemkey&&this.hdr.status==this._util.POST_STATUS&&this.http.doPost(this.dataService.getApiUrl()+"/rent/voidRent",t).subscribe(t=>{console.log("R : ",t),this.goNew()})}goMember(t){this.hdr.status==this._util.SAVE_STATUS&&(this._popType=2,this.currentPage=1,this.searchString="",this.searchMember(this.searchString),this.memberModal=this.modalService.open(t,{size:"xl",backdrop:"static",keyboard:!1}),this.memberModal.result.then(t=>{setTimeout(()=>{this.viewMe.nativeElement.focus()},300),null!=t&&(this.hdr.membersyskey=t.systemkey,this.hdr.membercode=t.code,this.hdr.membername=t.name,setTimeout(()=>{this._searchCode=""},1e3))},t=>{}))}changeOption(t){0!=t&&(this.currentPage=1,this.modalBookSearchTerm(this.searchString))}searchChangeBook(t){""==t.trim()&&this.modalBookSearchTerm(t)}searchChangeMember(t){""==t.trim()&&this.searchMember(t)}searchMember(t){let e={};e=isNaN(t)?{name:t,currentpage:this.currentPage,pagesize:this.pageSize}:{code:t,currentpage:this.currentPage,pagesize:this.pageSize},this.http.doPost(this.dataService._apiurl+"/member/all",e).subscribe(t=>{this.memberList=t.list,this.totalCount=t.totalcount})}modalBookSearchTerm(t){this.http.doPost(this.dataService._apiurl+"/book/all",this.getBookParam(t)).subscribe(t=>{this.bookList=t.list,this.totalCount=t.totalcount})}searchItem(t){this.http.doPost(this.dataService._apiurl+"/book/all",{code:t,currentpage:this.currentPage,pagesize:this.pageSize}).subscribe(t=>{this._searchCode="";let e=t.list[0];if(e.qty=1,null==this.itemList.filter((function(t){return t.bookcode==e.code}))[0]){let t={bookcode:e.code,bookname:e.name,booksystemkey:e.systemkey,authorname:this.rds.getAuthorName(e.author),authorsystemkey:e.author,quantity:e.qty,booktype:e.booktype};this.itemList.push(t)}})}removeItem(t){this.hdr.status==this._util.SAVE_STATUS&&this.itemList.splice(t,1)}addItem(t){setTimeout(()=>{this.viewMe.nativeElement.focus()},300),1==this._popType?this.modal.close(t):this.memberModal.close(t)}openXl(t){this.hdr.status==this._util.SAVE_STATUS&&(this._popType=1,this._optionRadio="1",this.currentPage=1,this.searchString="",this.modalBookSearchTerm(this.searchString),this.modal=this.modalService.open(t,{size:"xl",backdrop:"static",keyboard:!1}),this.modal.result.then(t=>{if(t){t.qty=1;let e={bookcode:t.code,bookname:t.name,booksystemkey:t.systemkey,authorname:this.rds.getAuthorName(t.author),authorsystemkey:t.author,quantity:t.qty,booktype:t.booktype};this.itemList.push(e)}},t=>{}))}getBookParam(t){let e;return"1"==this._optionRadio?e={code:t,availableFlag:0,currentpage:this.currentPage,pagesize:this.pageSize}:"2"==this._optionRadio?e={author:t,availableFlag:0,currentpage:this.currentPage,pagesize:this.pageSize}:"3"==this._optionRadio&&(e={booktype:t,availableFlag:0,currentpage:this.currentPage,pagesize:this.pageSize}),e}loadPage(t){this.currentPage=t,1==this._popType?this.modalBookSearchTerm(this.searchString):this.searchMember(this.searchString)}showMessage(t,e){this.msgService.sendMessage({t1:"alert",t2:t,t3:e})}defaultHdr(){return{systemkey:"0",refno:"",membersyskey:"0",membercode:"",membername:"",totalqty:"12",docdate:this._util.getTodayStringDate(),returndate:this._util.getTodayReturnDate(),status:"0",remark:""}}handleStatus(t){"0"==t?(this.handleBtn.save=!0,this.handleBtn.rent=!0,this.handleBtn.void=!1,this.handleBtn.search=!0,this.handleBtn.add=!0,this.handleBtn.qty=!0,this.handleBtn.delete=!0):"1"==t&&(this.handleBtn.save=!1,this.handleBtn.rent=!1,this.handleBtn.void=!0,this.handleBtn.search=!1,this.handleBtn.add=!1,this.handleBtn.qty=!1,this.handleBtn.delete=!1)}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(r.h),c.Kb(a.b),c.Kb(a.a),c.Kb(s.a),c.Kb(b.a),c.Kb(o.d),c.Kb(d.a),c.Kb(p.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-book-request-detail"]],viewQuery:function(t,e){var n;1&t&&c.Dc(P,!0),2&t&&c.pc(n=c.bc())&&(e.viewMe=n.first)},decls:93,vars:22,consts:[[1,"form"],[1,"col-md-12"],[1,"card"],[1,"row"],[1,"col-md-4"],[1,"form-group","row"],["for","formlabelref",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"col-sm-8"],["type","text","placeholder","Auto Ref.","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","formlabelcust",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"input-group"],["type","text","placeholder","Search","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fa","fa-search"],["for","formlabeldate1",1,"col-sm-4","col-form-label","col-form-label-sm"],["type","text","placeholder","","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["type","button",1,"btn","btn-outline-secondary","btn-sm"],[1,"fa","fa-calendar"],["for","formlabelcode",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"form-control","form-control-sm",2,"height","2.6rem",3,"ngModel","ngModelChange"],["for","formlabeldate2",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"col","col-md-12",2,"text-align","center"],[1,"mb-2",2,"border-top","1px solid #dedede","padding-top","6px"],[1,"form-group","btn-row"],[1,"btn","btn-primary","btn-sm","mr-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","mr-2",3,"click"],[1,"btn","btn-danger","btn-sm","mr-2",3,"disabled","click"],["role","form"],[1,"col","col-xl-12","col-lg-12"],[1,"card","mb-1"],[1,"card-header"],[1,"form-group","input-group"],["type","text","id","formlbarcode","placeholder","code / barcode",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","disabled","ngModelChange","keyup.enter"],["searchcode",""],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-barcode",2,"font-size","18px"],[1,"table","table-sm","table-hover","table-striped"],[2,"width","5%"],[2,"width","20%"],[2,"width","35%"],[2,"width","10%"],[2,"width","25%"],[1,"fixbody"],[4,"ngFor","ngForOf"],["content",""],["scope","row",1,"wid-5",2,"text-align","right"],[1,"wid-20"],[1,"wid-35"],[1,"wid-10"],[1,"form-group"],["type","number","min","1","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"wid-25"],[1,"wid-5",2,"cursor","pointer","text-align","center"],[2,"color","rgb(197, 6, 6)","font-size","18px",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"modal-header"],["class","modal-title","id","modal-basic-title",4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"col","col-md-12","col-lg-12"],[1,"card","mb-3"],[1,"col-md-6"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","1","checked","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","inlineRadio2",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio3","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["for","inlineRadio3",1,"form-check-label"],[2,"width","30%"],[1,"rows"],["size","sm",1,"d-flex","justify-content-end",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],[2,"width","10%","cursor","pointer"],[3,"click"],[2,"width","10%","text-align","center"],["type","button",1,"btn","btn-sm-s","btn-outline-dark",3,"click"],[1,"wid-15"],[1,"wid-45"],[2,"text-align","center"],[2,"cursor","pointer"]],template:function(t,e){if(1&t){const t=c.Qb();c.Pb(0,"div",0),c.Pb(1,"div",1),c.Pb(2,"h3"),c.zc(3,"Book Request"),c.Ob(),c.Ob(),c.Pb(4,"div",2),c.Pb(5,"div",3),c.Pb(6,"div",4),c.Pb(7,"div",5),c.Pb(8,"label",6),c.zc(9,"Ref No."),c.Ob(),c.Pb(10,"div",7),c.Pb(11,"input",8),c.ac("ngModelChange",(function(t){return e.hdr.refno=t})),c.Ob(),c.Ob(),c.Ob(),c.Pb(12,"div",5),c.Pb(13,"label",9),c.zc(14,"Member"),c.Ob(),c.Pb(15,"div",7),c.Pb(16,"div",10),c.Pb(17,"input",11),c.ac("ngModelChange",(function(t){return e.hdr.membername=t}))("keyup.enter",(function(){return e.searchMember(e.hdr.membername)})),c.Ob(),c.Pb(18,"div",12),c.Pb(19,"button",13),c.ac("click",(function(){c.rc(t);const n=c.qc(92);return e.goMember(n)})),c.Lb(20,"i",14),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(21,"div",4),c.Pb(22,"div",5),c.Pb(23,"label",15),c.zc(24,"Doc. Date"),c.Ob(),c.Pb(25,"div",7),c.Pb(26,"div",10),c.Pb(27,"input",16),c.ac("ngModelChange",(function(t){return e.hdr.docdate=t})),c.Ob(),c.Pb(28,"div",12),c.Pb(29,"button",17),c.Lb(30,"i",18),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(31,"div",5),c.Pb(32,"label",19),c.zc(33,"Remark"),c.Ob(),c.Pb(34,"div",7),c.Pb(35,"textarea",20),c.ac("ngModelChange",(function(t){return e.hdr.remark=t})),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(36,"div",4),c.Pb(37,"div",5),c.Pb(38,"label",21),c.zc(39,"Return Date"),c.Ob(),c.Pb(40,"div",7),c.Pb(41,"div",10),c.Pb(42,"input",16),c.ac("ngModelChange",(function(t){return e.hdr.returndate=t})),c.Ob(),c.Pb(43,"div",12),c.Pb(44,"button",17),c.Lb(45,"i",18),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(46,"div",3),c.Pb(47,"div",22),c.Pb(48,"div",23),c.Pb(49,"div",24),c.Pb(50,"button",25),c.ac("click",(function(){c.rc(t);const n=c.qc(92);return e.openXl(n)})),c.zc(51,"Add Book"),c.Ob(),c.Pb(52,"button",26),c.ac("click",(function(){return e.goList()})),c.zc(53,"List"),c.Ob(),c.Pb(54,"button",26),c.ac("click",(function(){return e.goNew()})),c.zc(55,"New"),c.Ob(),c.Pb(56,"button",25),c.ac("click",(function(){return e.goSave()})),c.zc(57,"Save"),c.Ob(),c.Pb(58,"button",25),c.ac("click",(function(){return e.goRent()})),c.zc(59,"Rent"),c.Ob(),c.Pb(60,"button",27),c.ac("click",(function(){return e.goDelete()})),c.zc(61,"Delete"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(62,"form",28),c.Pb(63,"div",3),c.Pb(64,"div",29),c.Pb(65,"div",30),c.Pb(66,"div",31),c.Pb(67,"div",3),c.Pb(68,"div",7),c.Pb(69,"div",32),c.Pb(70,"input",33,34),c.ac("ngModelChange",(function(t){return e._searchCode=t}))("keyup.enter",(function(){return e.searchItem(e._searchCode)})),c.Ob(),c.Pb(72,"div",12),c.Pb(73,"button",35),c.ac("click",(function(){c.rc(t);const n=c.qc(92);return e.openXl(n)})),c.Lb(74,"i",36),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(75,"table",37),c.Pb(76,"thead",1),c.Pb(77,"tr"),c.Pb(78,"th",38),c.zc(79,"No."),c.Ob(),c.Pb(80,"th",39),c.zc(81,"Code"),c.Ob(),c.Pb(82,"th",40),c.zc(83,"Name"),c.Ob(),c.Pb(84,"th",41),c.zc(85,"Qty"),c.Ob(),c.Pb(86,"th",42),c.zc(87,"Author"),c.Ob(),c.Lb(88,"th",38),c.Ob(),c.Ob(),c.Pb(89,"tbody",43),c.xc(90,f,15,8,"tr",44),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.xc(91,_,9,4,"ng-template",null,45,c.yc)}2&t&&(c.xb(11),c.ic("ngModel",e.hdr.refno),c.xb(6),c.ic("ngModel",e.hdr.membername)("ngModelOptions",c.lc(18,O)),c.xb(2),c.ic("disabled",!e.handleBtn.search),c.xb(8),c.ic("ngModel",e.hdr.docdate)("ngModelOptions",c.lc(19,O)),c.xb(8),c.ic("ngModel",e.hdr.remark),c.xb(7),c.ic("ngModel",e.hdr.returndate)("ngModelOptions",c.lc(20,O)),c.xb(8),c.ic("disabled",!e.handleBtn.add),c.xb(6),c.ic("disabled",!e.handleBtn.save),c.xb(2),c.ic("disabled",!e.handleBtn.rent),c.xb(2),c.ic("disabled",!e.handleBtn.void),c.xb(10),c.ic("ngModel",e._searchCode)("ngModelOptions",c.lc(21,O))("disabled",!e.handleBtn.search),c.xb(3),c.ic("disabled",!e.handleBtn.search),c.xb(17),c.ic("ngForOf",e.itemList))},directives:[i.a,i.e,i.h,i.o,i.f,i.g,o.l,i.j,o.m,i.k,r.k],pipes:[l.a],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;background-color:#3d0af5;color:#fff;border:2px solid #dee2e6;border-left:none;white-space:nowrap;padding:5px;font-size:14px!important;text-align:center}.fixbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:0!important;padding-right:10px!important}.table-sm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:13px;font-weight:400}form[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}form[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{width:calc(100% - 1em)}form[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow:auto;height:310px;width:100%}.wid-5[_ngcontent-%COMP%]{width:5%}.wid-10[_ngcontent-%COMP%]{width:10%}.wid-15[_ngcontent-%COMP%]{width:15%}.wid-20[_ngcontent-%COMP%]{width:20%}.wid-30[_ngcontent-%COMP%]{width:30%}.wid-25[_ngcontent-%COMP%]{width:25%}.wid-45[_ngcontent-%COMP%]{width:45%}.wid-4[_ngcontent-%COMP%]{width:4%}.wid-6[_ngcontent-%COMP%]{width:6%}.wid-8[_ngcontent-%COMP%]{width:8%}.wid-12[_ngcontent-%COMP%]{width:12%}.card[_ngcontent-%COMP%]{padding:5px 10px 0;margin-bottom:5px}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:5px}.card-header[_ngcontent-%COMP%]{padding:5px 0 0;margin-bottom:0;background-color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:.25rem}.table-sm[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.table-sm[_ngcontent-%COMP%]   .fixbody[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{height:25px}.table-sm[_ngcontent-%COMP%]   .fixbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:0!important;padding-right:10px!important}.btn-sm-s[_ngcontent-%COMP%]{padding:0 10px;font-size:14px}.btn-outline-secondary[_ngcontent-%COMP%]{padding:4px 8px;font-size:14px;color:#868e96;background-color:transparent;background-image:none;border-color:#ced4da}.btn-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:65px;padding:5px 10px;font-size:14px}.modal-body[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:260px;width:100%}.btn-outline-secondary.focus[_ngcontent-%COMP%], .btn-outline-secondary[_ngcontent-%COMP%]:focus, .btn-outline-secondary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .btn-outline-secondary.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px rgba(0,123,255,.25)}.bg-color-1[_ngcontent-%COMP%]{background-color:#993299}.bg-color-2[_ngcontent-%COMP%], .bg-color-3[_ngcontent-%COMP%]{background-color:#ced4da}"]}),t})();const z=[{path:"",component:S},{path:"bookrequest-list",component:u},{path:"bookrequest-detail/:id",component:S}];let w=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(z)],a.e]}),t})();var D=n("Sy8H"),L=n("sYmb");let A=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[o.b,i.b,i.l,r.i,r.l,D.a,L.b,w]]}),t})()}}]);