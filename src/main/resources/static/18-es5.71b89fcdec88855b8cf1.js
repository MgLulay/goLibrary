!function(){function e(e,n){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,b=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return c=e.done,e},e:function(e){b=!0,a=e},f:function(){try{c||null==o.return||o.return()}finally{if(b)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Jit6:function(t,o,r){"use strict";r.r(o),r.d(o,"RequestModule",(function(){return N}));var a=r("ofXK"),c=r("3Pt+"),b=r("1kSV"),d=r("tyNb"),s=r("fXoL"),l=r("8vjg"),h=r("J8x5"),u=r("g54X"),g=r("o+T9");function m(e,t){if(1&e){var n=s.Qb();s.Pb(0,"tr"),s.Pb(1,"td",20),s.zc(2),s.Ob(),s.Pb(3,"td",21),s.zc(4),s.dc(5,"dFormat"),s.Ob(),s.Pb(6,"td",21),s.zc(7),s.Ob(),s.Pb(8,"td"),s.zc(9),s.Ob(),s.Pb(10,"td",21),s.zc(11),s.dc(12,"dFormat"),s.Ob(),s.Pb(13,"td",21),s.zc(14),s.Ob(),s.Pb(15,"td",21),s.Pb(16,"span",14),s.ac("click",(function(){s.rc(n);var e=t.$implicit;return s.cc().itemDetail(e)})),s.Lb(17,"i",22),s.Ob(),s.Ob(),s.Ob()}if(2&e){var o=t.$implicit,i=t.index,r=s.cc();s.xb(2),s.Ac(i+1),s.xb(2),s.Ac(s.ec(5,6,o.docdate)),s.xb(3),s.Ac(o.refno),s.xb(2),s.Ac(r.rds.getMemberName(o.membersyskey)),s.xb(2),s.Ac(s.ec(12,8,o.returndate)),s.xb(3),s.Ac(r.statusName(o.status))}}var p,f=function(){return{standalone:!0}},P=((p=function(){function e(t,o,i,r){n(this,e),this._router=t,this.http=o,this.dataService=i,this.rds=r,this.bookRequestList=[],this.searchString="",this.totalCount=0,this.currentPage=1,this.pageSize=10}return i(e,[{key:"ngOnInit",value:function(){this.searchTerm("")}},{key:"searchTerm",value:function(e){var t=this;console.log("log",e),this.http.doPost(this.dataService._apiurl+"/rent/getrentlist",{code:e,currentpage:this.currentPage,pagesize:this.pageSize}).subscribe((function(e){console.log("--------------------: ",e),t.bookRequestList=e.list,t.totalCount=e.totalcount}))}},{key:"statusName",value:function(e){var t="";return null!=e&&("0"==e?t="Save":"1"==e?t="Rent":"2"==e?t="Void":"3"==e&&(t="Return")),t}},{key:"loadPage",value:function(e){this.currentPage=e,this.searchTerm(this.searchString)}},{key:"goDetail",value:function(){this._router.navigate(["/bookrequest"])}},{key:"itemDetail",value:function(e){this._router.navigate(["/bookrequest/bookrequest-detail",e.systemkey])}}]),e}()).\u0275fac=function(e){return new(e||p)(s.Kb(d.b),s.Kb(l.a),s.Kb(h.a),s.Kb(u.a))},p.\u0275cmp=s.Eb({type:p,selectors:[["app-book-request-list"]],decls:40,vars:10,consts:[[1,"bg-style"],[1,"row",2,"margin","0px"],[1,"col","col-xl-6","col-lg-12"],[1,"row"],[1,"col","col-md-12","col-lg-12"],[1,"card","mb-3",2,"min-height","30rem"],[1,"card-header"],[1,"col-md-6"],[1,"form-group","input-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-search"],[1,"table","table-sm","table-hover","table-striped"],[3,"click"],["aria-hidden","true",1,"fa","fa-plus-circle",2,"font-size","18px"],[4,"ngFor","ngForOf"],[1,"rows"],[1,"col","col-xl-12","col-lg-12"],["size","sm",1,"d-flex","justify-content-end",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],["scope","row"],[2,"text-align","center"],["aria-hidden","true",1,"fa","fa-arrow-circle-o-right"]],template:function(e,t){1&e&&(s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"div",2),s.Pb(3,"h2"),s.zc(4,"Book Request"),s.Ob(),s.Ob(),s.Ob(),s.Pb(5,"div",3),s.Pb(6,"div",4),s.Pb(7,"div",5),s.Pb(8,"div",6),s.Pb(9,"div",3),s.Pb(10,"div",7),s.Pb(11,"div",8),s.Pb(12,"input",9),s.ac("ngModelChange",(function(e){return t.searchString=e}))("keyup.enter",(function(){return t.searchTerm(t.searchString)})),s.Ob(),s.Pb(13,"div",10),s.Pb(14,"button",11),s.ac("click",(function(){return t.searchTerm(t.searchString)})),s.Lb(15,"i",12),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Lb(16,"div",7),s.Ob(),s.Ob(),s.Pb(17,"table",13),s.Pb(18,"thead"),s.Pb(19,"tr"),s.Pb(20,"th"),s.Pb(21,"span",14),s.ac("click",(function(){return t.goDetail()})),s.Lb(22,"i",15),s.Ob(),s.Ob(),s.Pb(23,"th"),s.zc(24,"Date"),s.Ob(),s.Pb(25,"th"),s.zc(26,"Ref no."),s.Ob(),s.Pb(27,"th"),s.zc(28,"Member"),s.Ob(),s.Pb(29,"th"),s.zc(30,"Return Date"),s.Ob(),s.Pb(31,"th"),s.zc(32,"Status"),s.Ob(),s.Pb(33,"th"),s.zc(34,"\xa0"),s.Ob(),s.Ob(),s.Ob(),s.Pb(35,"tbody"),s.xc(36,m,18,10,"tr",16),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(37,"div",17),s.Pb(38,"div",18),s.Pb(39,"ngb-pagination",19),s.ac("pageChange",(function(e){return t.loadPage(e)}))("pageChange",(function(e){return t.currentPage=e})),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.xb(12),s.ic("ngModel",t.searchString)("ngModelOptions",s.lc(9,f)),s.xb(24),s.ic("ngForOf",t.bookRequestList),s.xb(3),s.ic("collectionSize",t.totalCount)("page",t.currentPage)("pageSize",t.pageSize)("maxSize",10)("rotate",!0)("boundaryLinks",!0))},directives:[c.a,c.e,c.h,a.l,b.k],pipes:[g.a],styles:[".bg-style[_ngcontent-%COMP%]{background-color:#fff}.card-header[_ngcontent-%COMP%]{padding:10px 0 0;margin-bottom:0}.card[_ngcontent-%COMP%]{padding:5px 10px 0}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;background-color:#3d0af5;color:#fff;border:2px solid #dee2e6;border-left:none;white-space:nowrap;padding:5px;font-size:14px!important;text-align:center}"]}),p),O=r("mNYA"),y=r("E4M5"),v=["searchcode"],k=function(){return{standalone:!0}};function M(e,t){if(1&e){var n=s.Qb();s.Pb(0,"tr"),s.Pb(1,"td",46),s.zc(2),s.Ob(),s.Pb(3,"td",47),s.zc(4),s.Ob(),s.Pb(5,"td",48),s.zc(6),s.Ob(),s.Pb(7,"td",49),s.Pb(8,"div",50),s.Pb(9,"input",51),s.ac("ngModelChange",(function(e){return s.rc(n),t.$implicit.quantity=e})),s.Ob(),s.Ob(),s.Ob(),s.Pb(10,"td",52),s.zc(11),s.Ob(),s.Pb(12,"td",53),s.Pb(13,"span",54),s.ac("click",(function(){s.rc(n);var e=t.index;return s.cc().removeItem(e)})),s.Lb(14,"i",55),s.Ob(),s.Ob(),s.Ob()}if(2&e){var o=t.$implicit,i=t.index,r=s.cc();s.xb(2),s.Ac(i+1),s.xb(2),s.Ac(o.bookcode),s.xb(2),s.Ac(o.bookname),s.xb(3),s.ic("ngModel",o.quantity)("ngModelOptions",s.lc(7,k))("disabled",!r.handleBtn.qty),s.xb(2),s.Ac(r.rds.getAuthorName(o.authorsystemkey))}}function C(e,t){1&e&&(s.Pb(0,"h4",62),s.zc(1,"Book List"),s.Ob())}function x(e,t){1&e&&(s.Pb(0,"h4",62),s.zc(1,"Member List"),s.Ob())}function S(e,t){if(1&e){var n=s.Qb();s.Pb(0,"tr"),s.Pb(1,"td",79),s.Pb(2,"span",80),s.ac("click",(function(){s.rc(n);var e=t.$implicit;return s.cc(3).addItem(e)})),s.zc(3),s.Ob(),s.Ob(),s.Pb(4,"td",76),s.zc(5),s.Ob(),s.Pb(6,"td",42),s.zc(7),s.Ob(),s.Pb(8,"td",42),s.zc(9),s.Ob(),s.Pb(10,"td",81),s.Pb(11,"button",82),s.ac("click",(function(){s.rc(n);var e=t.$implicit;return s.cc(3).addItem(e)})),s.zc(12,"Add"),s.Ob(),s.Ob(),s.Ob()}if(2&e){var o=t.$implicit,i=s.cc(3);s.xb(3),s.Ac(o.code),s.xb(2),s.Ac(o.name),s.xb(2),s.Ac(i.rds.getAuthorName(o.author)),s.xb(2),s.Ac(i.rds.getCategoryName(o.booktype))}}function _(e,t){if(1&e){var n=s.Qb();s.Pb(0,"div",63),s.Pb(1,"div",3),s.Pb(2,"div",64),s.Pb(3,"div",65),s.Pb(4,"div",31),s.Pb(5,"div",3),s.Pb(6,"div",66),s.Pb(7,"div",32),s.Pb(8,"input",67),s.ac("ngModelChange",(function(e){return s.rc(n),s.cc(2).searchString=e}))("ngModelChange",(function(){s.rc(n);var e=s.cc(2);return e.searchChangeBook(e.searchString)}))("keyup.enter",(function(){s.rc(n);var e=s.cc(2);return e.modalBookSearchTerm(e.searchString)})),s.Ob(),s.Pb(9,"div",12),s.Pb(10,"button",68),s.ac("click",(function(){s.rc(n);var e=s.cc(2);return e.modalBookSearchTerm(e.searchString)})),s.Lb(11,"i",14),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(12,"div",66),s.Pb(13,"div",69),s.Pb(14,"input",70),s.ac("ngModelChange",(function(e){return s.rc(n),s.cc(2)._optionRadio=e}))("ngModelChange",(function(e){return s.rc(n),s.cc(2).changeOption(e)})),s.Ob(),s.Pb(15,"label",71),s.zc(16,"Default"),s.Ob(),s.Ob(),s.Pb(17,"div",69),s.Pb(18,"input",72),s.ac("ngModelChange",(function(e){return s.rc(n),s.cc(2)._optionRadio=e}))("ngModelChange",(function(e){return s.rc(n),s.cc(2).changeOption(e)})),s.Ob(),s.Pb(19,"label",73),s.zc(20,"Author"),s.Ob(),s.Ob(),s.Pb(21,"div",69),s.Pb(22,"input",74),s.ac("ngModelChange",(function(e){return s.rc(n),s.cc(2)._optionRadio=e}))("ngModelChange",(function(e){return s.rc(n),s.cc(2).changeOption(e)})),s.Ob(),s.Pb(23,"label",75),s.zc(24,"Type"),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(25,"table",37),s.Pb(26,"thead"),s.Pb(27,"tr"),s.Pb(28,"th",41),s.zc(29,"Code"),s.Ob(),s.Pb(30,"th",76),s.zc(31,"Name"),s.Ob(),s.Pb(32,"th",42),s.zc(33,"Author"),s.Ob(),s.Pb(34,"th",42),s.zc(35,"Type"),s.Ob(),s.Pb(36,"th",41),s.zc(37,"\xa0"),s.Ob(),s.Ob(),s.Ob(),s.Pb(38,"tbody"),s.xc(39,S,13,4,"tr",44),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(40,"div",77),s.Pb(41,"div",29),s.Pb(42,"ngb-pagination",78),s.ac("pageChange",(function(e){return s.rc(n),s.cc(2).loadPage(e)}))("pageChange",(function(e){return s.rc(n),s.cc(2).currentPage=e})),s.Ob(),s.Ob(),s.Ob(),s.Ob()}if(2&e){var o=s.cc(2);s.xb(8),s.ic("ngModel",o.searchString)("ngModelOptions",s.lc(12,k)),s.xb(6),s.ic("ngModel",o._optionRadio),s.xb(4),s.ic("ngModel",o._optionRadio),s.xb(4),s.ic("ngModel",o._optionRadio),s.xb(17),s.ic("ngForOf",o.bookList),s.xb(3),s.ic("collectionSize",o.totalCount)("page",o.currentPage)("pageSize",o.pageSize)("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function w(e,t){if(1&e){var n=s.Qb();s.Pb(0,"tr"),s.Pb(1,"td",85),s.zc(2),s.dc(3,"dFormat"),s.Ob(),s.Pb(4,"td",86),s.Pb(5,"span",80),s.ac("click",(function(){s.rc(n);var e=t.$implicit;return s.cc(3).addItem(e)})),s.zc(6),s.Ob(),s.Ob(),s.Pb(7,"td"),s.zc(8),s.Ob(),s.Pb(9,"td",85),s.Pb(10,"button",82),s.ac("click",(function(){s.rc(n);var e=t.$implicit;return s.cc(3).addItem(e)})),s.zc(11,"Add"),s.Ob(),s.Ob(),s.Ob()}if(2&e){var o=t.$implicit;s.xb(2),s.Ac(s.ec(3,3,o.starteddate)),s.xb(4),s.Ac(o.code),s.xb(2),s.Ac(o.name)}}function z(e,t){if(1&e){var n=s.Qb();s.Pb(0,"div",63),s.Pb(1,"div",3),s.Pb(2,"div",64),s.Pb(3,"div",65),s.Pb(4,"div",31),s.Pb(5,"div",3),s.Pb(6,"div",66),s.Pb(7,"div",32),s.Pb(8,"input",67),s.ac("ngModelChange",(function(e){return s.rc(n),s.cc(2).searchString=e}))("ngModelChange",(function(){s.rc(n);var e=s.cc(2);return e.searchChangeMember(e.searchString)}))("keyup.enter",(function(){s.rc(n);var e=s.cc(2);return e.searchMember(e.searchString)})),s.Ob(),s.Pb(9,"div",12),s.Pb(10,"button",68),s.ac("click",(function(){s.rc(n);var e=s.cc(2);return e.searchMember(e.searchString)})),s.Lb(11,"i",14),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Lb(12,"div",66),s.Ob(),s.Ob(),s.Pb(13,"table",37),s.Pb(14,"thead"),s.Pb(15,"tr"),s.Pb(16,"th",83),s.zc(17,"Date"),s.Ob(),s.Pb(18,"th",52),s.zc(19,"Code"),s.Ob(),s.Pb(20,"th",84),s.zc(21,"Name"),s.Ob(),s.Pb(22,"th",83),s.zc(23,"\xa0"),s.Ob(),s.Ob(),s.Ob(),s.Pb(24,"tbody"),s.xc(25,w,12,5,"tr",44),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(26,"div",77),s.Pb(27,"div",29),s.Pb(28,"ngb-pagination",78),s.ac("pageChange",(function(e){return s.rc(n),s.cc(2).loadPage(e)}))("pageChange",(function(e){return s.rc(n),s.cc(2).currentPage=e})),s.Ob(),s.Ob(),s.Ob(),s.Ob()}if(2&e){var o=s.cc(2);s.xb(8),s.ic("ngModel",o.searchString)("ngModelOptions",s.lc(9,k)),s.xb(17),s.ic("ngForOf",o.memberList),s.xb(3),s.ic("collectionSize",o.totalCount)("page",o.currentPage)("pageSize",o.pageSize)("maxSize",10)("rotate",!0)("boundaryLinks",!0)}}function D(e,t){if(1&e&&(s.Pb(0,"div",56),s.xc(1,C,2,0,"h4",57),s.xc(2,x,2,0,"h4",57),s.Pb(3,"button",58),s.ac("click",(function(){return(0,t.dismiss)("Cross click")})),s.Pb(4,"span",59),s.zc(5,"\xd7"),s.Ob(),s.Ob(),s.Ob(),s.xc(6,_,43,13,"div",60),s.xc(7,z,29,10,"div",60),s.Lb(8,"div",61)),2&e){var n=s.cc();s.xb(1),s.ic("ngIf",1==n._popType),s.xb(1),s.ic("ngIf",2==n._popType),s.xb(4),s.ic("ngIf",1==n._popType),s.xb(1),s.ic("ngIf",2==n._popType)}}var A,L,T,R=((A=function(){function t(e,o,i,r,a,c,b,d){var s=this;n(this,t),this.modalService=e,this._router=o,this.route=i,this.http=r,this.dataService=a,this.datepipe=c,this.rds=b,this.msgService=d,this._util=new O.a,this.bookList=[],this.memberList=[],this.itemList=[],this.searchString="",this._searchCode="",this._optionRadio="1",this.totalCount=10,this.currentPage=1,this.pageSize=10,this._popType=1,this.handleBtn={search:!0,save:!0,add:!0,rent:!0,void:!1,qty:!0,delete:!0},this.hdr=this.defaultHdr(),setTimeout((function(){s.viewMe.nativeElement.focus()}),1e3)}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){var n=t.id;"0"!=n&&null!=n&&""!=n?e.getReadBySyskey(n):e.hdr=e.defaultHdr()}))}},{key:"getReadBySyskey",value:function(e){var t=this,n={systemkey:e,currentpage:1,pagesize:10};this.http.doPost(this.dataService.getApiUrl()+"/rent/readbyRentbookSyskey",n).subscribe((function(e){t.hdr.systemkey=e.systemkey,t.hdr.refno=e.refno,t.hdr.docdate=t._util.changeStringtoDateDDMMYYYY(e.docdate),t.hdr.returndate=t._util.changeStringtoDateDDMMYYYY(e.returndate),t.hdr.membersyskey=e.membersyskey,t.hdr.membername=e.membername,t.hdr.status=e.status,t.hdr.remark=e.remark,t.itemList=e.rentalDetailInfoList,t.handleStatus(t.hdr.status)}))}},{key:"goList",value:function(){this._router.navigate(["/bookrequest/bookrequest-list"])}},{key:"goNew",value:function(){this.hdr=this.defaultHdr();var e=new Date;e.setDate(e.getDate()+3),this.hdr.docdate=this.datepipe.transform(new Date,"dd/MM/yyyy"),this.hdr.returndate=this.datepipe.transform(e,"dd/MM/yyyy"),this.itemList=[],this.handleStatus(this.hdr.status)}},{key:"goSave",value:function(){if(null!=this.hdr.membersyskey&&"0"!=this.hdr.membersyskey){if(this.hdr.status==this._util.SAVE_STATUS)if(this.itemList.length>0){var e=this.dataService._apiurl+"/rent/save",t=this.getPrepareParam();this.saveData(e,t)}else this.showMessage("warning","Please add book!")}else this.showMessage("warning","Invalid member!")}},{key:"goRent",value:function(){if(null!=this.hdr.membersyskey&&"0"!=this.hdr.membersyskey){if(this.hdr.status==this._util.SAVE_STATUS)if(this.itemList.length>0){var e=this.dataService._apiurl+"/rent/save",t=this.getPrepareParam();t.status="1",this.saveData(e,t)}else this.showMessage("warning","Please add book!")}else this.showMessage("warning","Invalid member!")}},{key:"saveData",value:function(e,t){var n=this;this.http.doPost(e,t).subscribe((function(e){"SUCCESS"==e.message?e.list.length>0&&(n.showMessage("success","Save Successfully!"),n.hdr.systemkey=e.list[0].systemkey,n.hdr.refno=e.list[0].refno,n.hdr.membersyskey=e.list[0].membersyskey,n.hdr.status=e.list[0].status,n.hdr.remark=e.list[0].remark,n.hdr.membercode=n.rds.getMemberCode(e.list[0].membersyskey),n.hdr.membername=n.rds.getMemberName(e.list[0].membersyskey),n.hdr.docdate=n._util.changeStringtoDateDDMMYYYY(e.list[0].docdate),n.hdr.returndate=n._util.changeStringtoDateDDMMYYYY(e.list[0].returndate),n.handleStatus(n.hdr.status)):n.showMessage("warning","FAIL"==e.message?"Fail!":e.message+"!")}),(function(e){console.error(e),n.showMessage("warning","Server Error!")}))}},{key:"getPrepareParam",value:function(){var t,n={systemkey:this.hdr.systemkey,refno:this.hdr.refno,docdate:this._util.changeDatetoStringYYYYMMDDD(this.hdr.docdate),duedate:this._util.changeDatetoStringYYYYMMDDD(this.hdr.returndate),returndate:this._util.changeDatetoStringYYYYMMDDD(this.hdr.returndate),membersyskey:this.hdr.membersyskey,membercode:this.hdr.membercode,status:"0",userid:"0",username:"0",remark:this.hdr.remark,rentalDetailInfoList:[]},o=e(this.itemList);try{for(o.s();!(t=o.n()).done;){var i=t.value;n.rentalDetailInfoList.push({systemkey:"0",parentsystemkey:"0",bookcode:i.bookcode,bookname:i.bookname,booksystemkey:i.booksystemkey,authorname:i.authorname,authorsystemkey:i.authorsystemkey,quantity:i.quantity})}}catch(r){o.e(r)}finally{o.f()}return n}},{key:"goDelete",value:function(){var e=this,t={systemkey:this.hdr.systemkey,currentpage:1,pagesize:10};console.log("Param : ",t),"0"!=this.hdr.systemkey&&this.hdr.status==this._util.POST_STATUS&&this.http.doPost(this.dataService.getApiUrl()+"/rent/voidRent",t).subscribe((function(t){console.log("R : ",t),e.goNew()}))}},{key:"goMember",value:function(e){var t=this;this.hdr.status==this._util.SAVE_STATUS&&(this._popType=2,this.currentPage=1,this.searchString="",this.searchMember(this.searchString),this.memberModal=this.modalService.open(e,{size:"xl",backdrop:"static",keyboard:!1}),this.memberModal.result.then((function(e){setTimeout((function(){t.viewMe.nativeElement.focus()}),300),null!=e&&(t.hdr.membersyskey=e.systemkey,t.hdr.membercode=e.code,t.hdr.membername=e.name,setTimeout((function(){t._searchCode=""}),1e3))}),(function(e){})))}},{key:"changeOption",value:function(e){0!=e&&(this.currentPage=1,this.modalBookSearchTerm(this.searchString))}},{key:"searchChangeBook",value:function(e){""==e.trim()&&this.modalBookSearchTerm(e)}},{key:"searchChangeMember",value:function(e){""==e.trim()&&this.searchMember(e)}},{key:"searchMember",value:function(e){var t,n=this;t=isNaN(e)?{name:e,currentpage:this.currentPage,pagesize:this.pageSize}:{code:e,currentpage:this.currentPage,pagesize:this.pageSize},this.http.doPost(this.dataService._apiurl+"/member/all",t).subscribe((function(e){n.memberList=e.list,n.totalCount=e.totalcount}))}},{key:"modalBookSearchTerm",value:function(e){var t=this;this.http.doPost(this.dataService._apiurl+"/book/all",this.getBookParam(e)).subscribe((function(e){t.bookList=e.list,t.totalCount=e.totalcount}))}},{key:"searchItem",value:function(e){var t=this;this.http.doPost(this.dataService._apiurl+"/book/all",{code:e,currentpage:this.currentPage,pagesize:this.pageSize}).subscribe((function(e){t._searchCode="";var n=e.list[0];if(n.qty=1,null==t.itemList.filter((function(e){return e.bookcode==n.code}))[0]){var o={bookcode:n.code,bookname:n.name,booksystemkey:n.systemkey,authorname:t.rds.getAuthorName(n.author),authorsystemkey:n.author,quantity:n.qty,booktype:n.booktype};t.itemList.push(o)}}))}},{key:"removeItem",value:function(e){this.hdr.status==this._util.SAVE_STATUS&&this.itemList.splice(e,1)}},{key:"addItem",value:function(e){var t=this;setTimeout((function(){t.viewMe.nativeElement.focus()}),300),1==this._popType?this.modal.close(e):this.memberModal.close(e)}},{key:"openXl",value:function(e){var t=this;this.hdr.status==this._util.SAVE_STATUS&&(this._popType=1,this._optionRadio="1",this.currentPage=1,this.searchString="",this.modalBookSearchTerm(this.searchString),this.modal=this.modalService.open(e,{size:"xl",backdrop:"static",keyboard:!1}),this.modal.result.then((function(e){if(e){e.qty=1;var n={bookcode:e.code,bookname:e.name,booksystemkey:e.systemkey,authorname:t.rds.getAuthorName(e.author),authorsystemkey:e.author,quantity:e.qty,booktype:e.booktype};t.itemList.push(n)}}),(function(e){})))}},{key:"getBookParam",value:function(e){var t;return"1"==this._optionRadio?t={code:e,availableFlag:0,currentpage:this.currentPage,pagesize:this.pageSize}:"2"==this._optionRadio?t={author:e,availableFlag:0,currentpage:this.currentPage,pagesize:this.pageSize}:"3"==this._optionRadio&&(t={booktype:e,availableFlag:0,currentpage:this.currentPage,pagesize:this.pageSize}),t}},{key:"loadPage",value:function(e){this.currentPage=e,1==this._popType?this.modalBookSearchTerm(this.searchString):this.searchMember(this.searchString)}},{key:"showMessage",value:function(e,t){this.msgService.sendMessage({t1:"alert",t2:e,t3:t})}},{key:"defaultHdr",value:function(){return{systemkey:"0",refno:"",membersyskey:"0",membercode:"",membername:"",totalqty:"12",docdate:this._util.getTodayStringDate(),returndate:this._util.getTodayReturnDate(),status:"0",remark:""}}},{key:"handleStatus",value:function(e){"0"==e?(this.handleBtn.save=!0,this.handleBtn.rent=!0,this.handleBtn.void=!1,this.handleBtn.search=!0,this.handleBtn.add=!0,this.handleBtn.qty=!0,this.handleBtn.delete=!0):"1"==e&&(this.handleBtn.save=!1,this.handleBtn.rent=!1,this.handleBtn.void=!0,this.handleBtn.search=!1,this.handleBtn.add=!1,this.handleBtn.qty=!1,this.handleBtn.delete=!1)}}]),t}()).\u0275fac=function(e){return new(e||A)(s.Kb(b.h),s.Kb(d.b),s.Kb(d.a),s.Kb(l.a),s.Kb(h.a),s.Kb(a.d),s.Kb(u.a),s.Kb(y.a))},A.\u0275cmp=s.Eb({type:A,selectors:[["app-book-request-detail"]],viewQuery:function(e,t){var n;1&e&&s.Dc(v,!0),2&e&&s.pc(n=s.bc())&&(t.viewMe=n.first)},decls:93,vars:22,consts:[[1,"form"],[1,"col-md-12"],[1,"card"],[1,"row"],[1,"col-md-4"],[1,"form-group","row"],["for","formlabelref",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"col-sm-8"],["type","text","placeholder","Auto Ref.","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","formlabelcust",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"input-group"],["type","text","placeholder","Search","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fa","fa-search"],["for","formlabeldate1",1,"col-sm-4","col-form-label","col-form-label-sm"],["type","text","placeholder","","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["type","button",1,"btn","btn-outline-secondary","btn-sm"],[1,"fa","fa-calendar"],["for","formlabelcode",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"form-control","form-control-sm",2,"height","2.6rem",3,"ngModel","ngModelChange"],["for","formlabeldate2",1,"col-sm-4","col-form-label","col-form-label-sm"],[1,"col","col-md-12",2,"text-align","center"],[1,"mb-2",2,"border-top","1px solid #dedede","padding-top","6px"],[1,"form-group","btn-row"],[1,"btn","btn-primary","btn-sm","mr-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","mr-2",3,"click"],[1,"btn","btn-danger","btn-sm","mr-2",3,"disabled","click"],["role","form"],[1,"col","col-xl-12","col-lg-12"],[1,"card","mb-1"],[1,"card-header"],[1,"form-group","input-group"],["type","text","id","formlbarcode","placeholder","code / barcode",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","disabled","ngModelChange","keyup.enter"],["searchcode",""],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-barcode",2,"font-size","18px"],[1,"table","table-sm","table-hover","table-striped"],[2,"width","5%"],[2,"width","20%"],[2,"width","35%"],[2,"width","10%"],[2,"width","25%"],[1,"fixbody"],[4,"ngFor","ngForOf"],["content",""],["scope","row",1,"wid-5",2,"text-align","right"],[1,"wid-20"],[1,"wid-35"],[1,"wid-10"],[1,"form-group"],["type","number","min","1","placeholder","",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"wid-25"],[1,"wid-5",2,"cursor","pointer","text-align","center"],[2,"color","rgb(197, 6, 6)","font-size","18px",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"modal-header"],["class","modal-title","id","modal-basic-title",4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"col","col-md-12","col-lg-12"],[1,"card","mb-3"],[1,"col-md-6"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"form-check","form-check-inline"],["type","radio","name","inlineRadioOptions","id","inlineRadio1","value","1","checked","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio2","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","inlineRadio2",1,"form-check-label"],["type","radio","name","inlineRadioOptions","id","inlineRadio3","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["for","inlineRadio3",1,"form-check-label"],[2,"width","30%"],[1,"rows"],["size","sm",1,"d-flex","justify-content-end",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],[2,"width","10%","cursor","pointer"],[3,"click"],[2,"width","10%","text-align","center"],["type","button",1,"btn","btn-sm-s","btn-outline-dark",3,"click"],[1,"wid-15"],[1,"wid-45"],[2,"text-align","center"],[2,"cursor","pointer"]],template:function(e,t){if(1&e){var n=s.Qb();s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"h3"),s.zc(3,"Book Request"),s.Ob(),s.Ob(),s.Pb(4,"div",2),s.Pb(5,"div",3),s.Pb(6,"div",4),s.Pb(7,"div",5),s.Pb(8,"label",6),s.zc(9,"Ref No."),s.Ob(),s.Pb(10,"div",7),s.Pb(11,"input",8),s.ac("ngModelChange",(function(e){return t.hdr.refno=e})),s.Ob(),s.Ob(),s.Ob(),s.Pb(12,"div",5),s.Pb(13,"label",9),s.zc(14,"Member"),s.Ob(),s.Pb(15,"div",7),s.Pb(16,"div",10),s.Pb(17,"input",11),s.ac("ngModelChange",(function(e){return t.hdr.membername=e}))("keyup.enter",(function(){return t.searchMember(t.hdr.membername)})),s.Ob(),s.Pb(18,"div",12),s.Pb(19,"button",13),s.ac("click",(function(){s.rc(n);var e=s.qc(92);return t.goMember(e)})),s.Lb(20,"i",14),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(21,"div",4),s.Pb(22,"div",5),s.Pb(23,"label",15),s.zc(24,"Doc. Date"),s.Ob(),s.Pb(25,"div",7),s.Pb(26,"div",10),s.Pb(27,"input",16),s.ac("ngModelChange",(function(e){return t.hdr.docdate=e})),s.Ob(),s.Pb(28,"div",12),s.Pb(29,"button",17),s.Lb(30,"i",18),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(31,"div",5),s.Pb(32,"label",19),s.zc(33,"Remark"),s.Ob(),s.Pb(34,"div",7),s.Pb(35,"textarea",20),s.ac("ngModelChange",(function(e){return t.hdr.remark=e})),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(36,"div",4),s.Pb(37,"div",5),s.Pb(38,"label",21),s.zc(39,"Return Date"),s.Ob(),s.Pb(40,"div",7),s.Pb(41,"div",10),s.Pb(42,"input",16),s.ac("ngModelChange",(function(e){return t.hdr.returndate=e})),s.Ob(),s.Pb(43,"div",12),s.Pb(44,"button",17),s.Lb(45,"i",18),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(46,"div",3),s.Pb(47,"div",22),s.Pb(48,"div",23),s.Pb(49,"div",24),s.Pb(50,"button",25),s.ac("click",(function(){s.rc(n);var e=s.qc(92);return t.openXl(e)})),s.zc(51,"Add Book"),s.Ob(),s.Pb(52,"button",26),s.ac("click",(function(){return t.goList()})),s.zc(53,"List"),s.Ob(),s.Pb(54,"button",26),s.ac("click",(function(){return t.goNew()})),s.zc(55,"New"),s.Ob(),s.Pb(56,"button",25),s.ac("click",(function(){return t.goSave()})),s.zc(57,"Save"),s.Ob(),s.Pb(58,"button",25),s.ac("click",(function(){return t.goRent()})),s.zc(59,"Rent"),s.Ob(),s.Pb(60,"button",27),s.ac("click",(function(){return t.goDelete()})),s.zc(61,"Delete"),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(62,"form",28),s.Pb(63,"div",3),s.Pb(64,"div",29),s.Pb(65,"div",30),s.Pb(66,"div",31),s.Pb(67,"div",3),s.Pb(68,"div",7),s.Pb(69,"div",32),s.Pb(70,"input",33,34),s.ac("ngModelChange",(function(e){return t._searchCode=e}))("keyup.enter",(function(){return t.searchItem(t._searchCode)})),s.Ob(),s.Pb(72,"div",12),s.Pb(73,"button",35),s.ac("click",(function(){s.rc(n);var e=s.qc(92);return t.openXl(e)})),s.Lb(74,"i",36),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(75,"table",37),s.Pb(76,"thead",1),s.Pb(77,"tr"),s.Pb(78,"th",38),s.zc(79,"No."),s.Ob(),s.Pb(80,"th",39),s.zc(81,"Code"),s.Ob(),s.Pb(82,"th",40),s.zc(83,"Name"),s.Ob(),s.Pb(84,"th",41),s.zc(85,"Qty"),s.Ob(),s.Pb(86,"th",42),s.zc(87,"Author"),s.Ob(),s.Lb(88,"th",38),s.Ob(),s.Ob(),s.Pb(89,"tbody",43),s.xc(90,M,15,8,"tr",44),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.xc(91,D,9,4,"ng-template",null,45,s.yc)}2&e&&(s.xb(11),s.ic("ngModel",t.hdr.refno),s.xb(6),s.ic("ngModel",t.hdr.membername)("ngModelOptions",s.lc(18,k)),s.xb(2),s.ic("disabled",!t.handleBtn.search),s.xb(8),s.ic("ngModel",t.hdr.docdate)("ngModelOptions",s.lc(19,k)),s.xb(8),s.ic("ngModel",t.hdr.remark),s.xb(7),s.ic("ngModel",t.hdr.returndate)("ngModelOptions",s.lc(20,k)),s.xb(8),s.ic("disabled",!t.handleBtn.add),s.xb(6),s.ic("disabled",!t.handleBtn.save),s.xb(2),s.ic("disabled",!t.handleBtn.rent),s.xb(2),s.ic("disabled",!t.handleBtn.void),s.xb(10),s.ic("ngModel",t._searchCode)("ngModelOptions",s.lc(21,k))("disabled",!t.handleBtn.search),s.xb(3),s.ic("disabled",!t.handleBtn.search),s.xb(17),s.ic("ngForOf",t.itemList))},directives:[c.a,c.e,c.h,c.o,c.f,c.g,a.l,c.j,a.m,c.k,b.k],pipes:[g.a],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;background-color:#3d0af5;color:#fff;border:2px solid #dee2e6;border-left:none;white-space:nowrap;padding:5px;font-size:14px!important;text-align:center}.fixbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:0!important;padding-right:10px!important}.table-sm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:13px;font-weight:400}form[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}form[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{width:calc(100% - 1em)}form[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;overflow:auto;height:310px;width:100%}.wid-5[_ngcontent-%COMP%]{width:5%}.wid-10[_ngcontent-%COMP%]{width:10%}.wid-15[_ngcontent-%COMP%]{width:15%}.wid-20[_ngcontent-%COMP%]{width:20%}.wid-30[_ngcontent-%COMP%]{width:30%}.wid-25[_ngcontent-%COMP%]{width:25%}.wid-45[_ngcontent-%COMP%]{width:45%}.wid-4[_ngcontent-%COMP%]{width:4%}.wid-6[_ngcontent-%COMP%]{width:6%}.wid-8[_ngcontent-%COMP%]{width:8%}.wid-12[_ngcontent-%COMP%]{width:12%}.card[_ngcontent-%COMP%]{padding:5px 10px 0;margin-bottom:5px}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:5px}.card-header[_ngcontent-%COMP%]{padding:5px 0 0;margin-bottom:0;background-color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:.25rem}.table-sm[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.table-sm[_ngcontent-%COMP%]   .fixbody[_ngcontent-%COMP%]   .form-control-sm[_ngcontent-%COMP%]{height:25px}.table-sm[_ngcontent-%COMP%]   .fixbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:0!important;padding-right:10px!important}.btn-sm-s[_ngcontent-%COMP%]{padding:0 10px;font-size:14px}.btn-outline-secondary[_ngcontent-%COMP%]{padding:4px 8px;font-size:14px;color:#868e96;background-color:transparent;background-image:none;border-color:#ced4da}.btn-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:65px;padding:5px 10px;font-size:14px}.modal-body[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:260px;width:100%}.btn-outline-secondary.focus[_ngcontent-%COMP%], .btn-outline-secondary[_ngcontent-%COMP%]:focus, .btn-outline-secondary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .btn-outline-secondary.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px rgba(0,123,255,.25)}.bg-color-1[_ngcontent-%COMP%]{background-color:#993299}.bg-color-2[_ngcontent-%COMP%], .bg-color-3[_ngcontent-%COMP%]{background-color:#ced4da}"]}),A),B=[{path:"",component:R},{path:"bookrequest-list",component:P},{path:"bookrequest-detail/:id",component:R}],q=((L=function e(){n(this,e)}).\u0275mod=s.Ib({type:L}),L.\u0275inj=s.Hb({factory:function(e){return new(e||L)},imports:[[d.e.forChild(B)],d.e]}),L),Y=r("Sy8H"),I=r("sYmb"),N=((T=function e(){n(this,e)}).\u0275mod=s.Ib({type:T}),T.\u0275inj=s.Hb({factory:function(e){return new(e||T)},imports:[[a.b,c.b,c.l,b.i,b.l,Y.a,I.b,q]]}),T)}}])}();